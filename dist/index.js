!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("TabRouter",[],e):"object"==typeof exports?exports.TabRouter=e():t.TabRouter=e()}("undefined"!=typeof self?self:this,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var a=e[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=8)}([function(t,e,n){"use strict";e.b=function(t){var e=t.target,n=t.tabTitle,a=t.forceRefresh,o=t.cacheType;r.data={target:e,tabTitle:n,forceRefresh:a,cacheType:o}};var r={data:null};Object.defineProperty(r,"next",{get:function(){var t=this.data||{target:"_blank",tabTitle:"",forceRefresh:!1,cacheType:""};return this.data=null,t.cacheType=(t.cacheType||"").match(/^(nocache|keep-alive|alive)$/)?t.cacheType:"",t}}),e.a=r},function(t,e,n){t.exports=!n(7)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){var r=n(9),a=n(10);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[t.i,a,""]]);var o={insert:"head",singleton:!1},i=(r(a,o),a.locals?a.locals:{});t.exports=i},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){var n=t.exports={version:"2.6.11"};"number"==typeof __e&&(__e=n)},function(t,e,n){var r=n(24),a=n(25),o=n(27),i=Object.defineProperty;e.f=n(1)?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),a)try{return i(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),a=(n.n(r),n(12)),o=n(31);e.default={install:function(t){t.component("tab-router-view",a.a),t.component("tab-router-link",o.a),t.mixin({beforeCreate:function(){var t=this.$options.parent;t&&t.$tabRoute&&!this.$tabRoute&&(this.$tabRoute=t.$tabRoute,this.$tabRouter=t.$tabRouter)}})}}},function(t,e,n){"use strict";var r,a=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},o=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[e]=n}return t[e]}}(),i=[];function u(t){for(var e=-1,n=0;n<i.length;n++)if(i[n].identifier===t){e=n;break}return e}function c(t,e){for(var n={},r=[],a=0;a<t.length;a++){var o=t[a],c=e.base?o[0]+e.base:o[0],s=n[c]||0,f="".concat(c," ").concat(s);n[c]=s+1;var l=u(f),p={css:o[1],media:o[2],sourceMap:o[3]};-1!==l?(i[l].references++,i[l].updater(p)):i.push({identifier:f,updater:b(p,e),references:1}),r.push(f)}return r}function s(t){var e=document.createElement("style"),r=t.attributes||{};if(void 0===r.nonce){var a=n.nc;a&&(r.nonce=a)}if(Object.keys(r).forEach(function(t){e.setAttribute(t,r[t])}),"function"==typeof t.insert)t.insert(e);else{var i=o(t.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(e)}return e}var f,l=(f=[],function(t,e){return f[t]=e,f.filter(Boolean).join("\n")});function p(t,e,n,r){var a=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(t.styleSheet)t.styleSheet.cssText=l(e,a);else{var o=document.createTextNode(a),i=t.childNodes;i[e]&&t.removeChild(i[e]),i.length?t.insertBefore(o,i[e]):t.appendChild(o)}}var h=null,d=0;function b(t,e){var n,r,a;if(e.singleton){var o=d++;n=h||(h=s(e)),r=p.bind(null,n,o,!1),a=p.bind(null,n,o,!0)}else n=s(e),r=function(t,e,n){var r=n.css,a=n.media,o=n.sourceMap;if(a?t.setAttribute("media",a):t.removeAttribute("media"),o&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}.bind(null,n,e),a=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else a()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=a());var n=c(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var r=0;r<n.length;r++){var a=u(n[r]);i[a].references--}for(var o=c(t,e),s=0;s<n.length;s++){var f=u(n[s]);0===i[f].references&&(i[f].updater(),i.splice(f,1))}n=o}}}},function(t,e,n){(t.exports=n(11)(!1)).push([t.i,'.tab-router-container {\n  display: flex;\n  flex-direction: column;\n}\n.router-view {\n  height: 100px;\n  flex-grow: 1;\n  padding: 0 10px;\n  overflow: auto;\n}\n.tab-list {\n  display: flex;\n  padding: 10px 15px 0;\n  background: #f0f2f4;\n}\n.tab-list .tab-item {\n  position: relative;\n  min-width: 80px;\n  height: 30px;\n  padding: 0 10px;\n  border-radius: 4px 4px 0 0;\n  line-height: 30px;\n  color: #333;\n  font-size: 12px;\n}\n.tab-list .tab-item .tab-body {\n  margin-right: 20px;\n}\n.tab-list .tab-item .tab-close {\n  position: absolute;\n  top: 0;\n  right: 0;\n  width: 30px;\n  height: 30px;\n  text-align: center;\n  font: bold 20px/30px "simsun";\n  color: #aaa;\n  transition: 0.2s ease-in-out;\n}\n.tab-list .tab-item .tab-close:hover {\n  color: #333;\n}\n.tab-list .tab-item:hover {\n  background: #f9fafa;\n}\n.tab-list .tab-item.active {\n  background: #fff;\n}\n.tab-router-link {\n  cursor: pointer;\n}\n',""])},function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=function(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var a=(i=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),o=r.sources.map(function(t){return"/*# sourceURL="+r.sourceRoot+t+" */"});return[n].concat(o).concat([a]).join("\n")}var i;return[n].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},a=0;a<this.length;a++){var o=this[a][0];"number"==typeof o&&(r[o]=!0)}for(a=0;a<t.length;a++){var i=t[a];"number"==typeof i[0]&&r[i[0]]||(n&&!i[2]?i[2]=n:n&&(i[2]="("+i[2]+") and ("+n+")"),e.push(i))}},e}},function(t,e,n){"use strict";var r=n(3),a=(n.n(r),n(13)),o=n(0),i=n(14),u=n(30);e.a={name:"tab-router-view",components:{tabList:a.a},data:function(){return{opendTab:null,opendTabList:[],maxTabID:0}},render:function(t){var e=this,n=[],r=null,a=null,o=function(n,r){return t(n._components,{key:n.name,class:["router-view",n.cacheType],directives:r?r.directives:void 0,props:{visible:n===e.opendTab,cacheType:n.cacheType},on:{"update-title":function(t){n.title=t.title}}})};return this.opendTabList.forEach(function(t){switch(t.cacheType){case"alive":n.push(o(t,{directives:[{name:"show",value:t===e.opendTab}]}));break;case"keep-alive":t===e.opendTab&&(r=o(t));break;case"nocache":t===e.opendTab&&(a=o(t))}}),t("div",{class:"tab-router-container"},[t("tabList",{props:{list:this.opendTabList,active:this.opendTab}}),t("keep-alive",{},[r])].concat([n],[a]))},mounted:function(){var t=this;this.handleRouteChange(this.$route),this.removeRouterListener=this.$router.beforeEach(function(e,n,r){t.handleRouteChange(e),r()})},methods:{getTabInOpendList:function(t,e){for(var n=0;n<this.opendTabList.length;n++)if(this.opendTabList[n][t]===e)return this.opendTabList[n];return null},handleRouteChange:function(t){var e=o.a.next,n=e.target,r=e.forceRefresh,a=e.tabTitle,i=e.cacheType,u=n&&"_blank"!==n?n:t.meta.tabName,c=null;u?c=this.getTabInOpendList("name",u):u=String(this.maxTabID++),c?(t.fullPath!==c.fullPath&&(r?(c.fullPath=t.fullPath,c.query=t.query,c.params=t.params):this.$router.replace(c.fullPath)),this.opendTab=c):this.createNewTab(t,{tabName:u,cacheType:i,tabTitle:a})},createNewTab:function(t,e){var n=e.tabName,r=e.tabTitle,a=e.cacheType,o=t.path,c=t.query,s=t.fullPath,f=t.matched,l=t.params,p=f?f[f.length-1]:null;if(!p)throw new Error("路由缺失，请补全！");var h=p.meta,d={name:n,path:o,query:c,params:l,fullPath:s,title:r||h.tabTitle||"无标题",cacheType:a||h.cacheType||u.a.default.cacheType,_components:{beforeCreate:function(){this.constructor.super.util.defineReactive(this,"$tabRoute",d),this.$tabRouter=new i.a(d,this.$router)},extends:p.components.default}};this.opendTabList.push(d),this.opendTab=d}},beforeDestroy:function(){console.log("解除注册拦截器"),this.removeRouterListener()}}},function(t,e,n){"use strict";var r=n(0);e.a={name:"tab-router-bar",props:{list:{type:Array,default:function(){return[]}},active:{type:Object},defaultRoutePath:{type:String,default:""}},data:function(){return{}},render:function(t){var e=this,n=this.list.map(function(n,r){var a=e.$parent.$scopedSlots["tab-title"];return t("tab-router-link",{class:["tab-item",e.active===n?"active":""],props:{to:n.path,target:n.name},key:n.name},[t("span",{class:"tab-body"},[a?a({tab:n}):n.title]),t("span",{class:"tab-close",on:{click:function(t){e.removeItem(r),t.preventDefault()}},directives:[{name:"show",value:e.list.length>1}]},["×"])])});return t("div",{class:"tab-list"},n)},methods:{removeItem:function(t){if(this.active===this.list[t]){var e=void 0;if((e=t<this.list.length-1?t+1:t>0?t-1:-1)>-1){var n=this.list[e];Object(r.b)({target:n.name,forceRefresh:!1}),this.$router.replace(n.path)}}this.list.splice(t,1)}}}},function(t,e,n){"use strict";var r=n(15),a=n.n(r),o=n(16),i=n.n(o),u=n(0),c=function(){},s=function(){function t(e,n){a()(this,t),this.tabData=e,this.$router=n}return i()(t,[{key:"setNextData",value:function(){Object(u.b)({target:this.tabData.name,tabTitle:this.tabData.title,forceRefresh:!0,cacheType:this.tabData.cacheType})}},{key:"push",value:function(t,e,n){this.setNextData(),this.$router.push(t,e||c,n||c)}},{key:"replace",value:function(t,e,n){this.setNextData(),this.$router.replace(t,e||c,n||c)}}]),t}();e.a=s},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){"use strict";e.__esModule=!0;var r,a=n(17),o=(r=a)&&r.__esModule?r:{default:r};e.default=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,o.default)(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()},function(t,e,n){t.exports={default:n(18),__esModule:!0}},function(t,e,n){n(19);var r=n(5).Object;t.exports=function(t,e,n){return r.defineProperty(t,e,n)}},function(t,e,n){var r=n(20);r(r.S+r.F*!n(1),"Object",{defineProperty:n(6).f})},function(t,e,n){var r=n(4),a=n(5),o=n(21),i=n(23),u=n(29),c=function(t,e,n){var s,f,l,p=t&c.F,h=t&c.G,d=t&c.S,b=t&c.P,v=t&c.B,y=t&c.W,m=h?a:a[e]||(a[e]={}),g=m.prototype,T=h?r:d?r[e]:(r[e]||{}).prototype;for(s in h&&(n=e),n)(f=!p&&T&&void 0!==T[s])&&u(m,s)||(l=f?T[s]:n[s],m[s]=h&&"function"!=typeof T[s]?n[s]:v&&f?o(l,r):y&&T[s]==l?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(l):b&&"function"==typeof l?o(Function.call,l):l,b&&((m.virtual||(m.virtual={}))[s]=l,t&c.R&&g&&!g[s]&&i(g,s,l)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},function(t,e,n){var r=n(22);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,a){return t.call(e,n,r,a)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var r=n(6),a=n(28);t.exports=n(1)?function(t,e,n){return r.f(t,e,a(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(2);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){t.exports=!n(1)&&!n(7)(function(){return 7!=Object.defineProperty(n(26)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var r=n(2),a=n(4).document,o=r(a)&&r(a.createElement);t.exports=function(t){return o?a.createElement(t):{}}},function(t,e,n){var r=n(2);t.exports=function(t,e){if(!r(t))return t;var n,a;if(e&&"function"==typeof(n=t.toString)&&!r(a=n.call(t)))return a;if("function"==typeof(n=t.valueOf)&&!r(a=n.call(t)))return a;if(!e&&"function"==typeof(n=t.toString)&&!r(a=n.call(t)))return a;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){"use strict";e.a={default:{cacheType:"keep-alive"}}},function(t,e,n){"use strict";var r=n(0);var a=function(){};e.a={name:"tab-router-link",props:{to:String,replace:{type:Boolean,default:!1},target:{type:String,default:"_blank"},forceRefresh:{type:Boolean,default:!1},tabTitle:String,cacheType:String},render:function(t){var e=this;function n(){e.$emit("router-change")}return t("a",{class:["tab-router-link",this.$route.path===this.to?"tab-router-link-active":""],on:{click:function(t){(function(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey||t.defaultPrevented||void 0!==t.button&&0!==t.button)){if(t.currentTarget&&t.currentTarget.getAttribute){var e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}})(t)&&(Object(r.b)({target:e.target,tabTitle:e.tabTitle,forceRefresh:e.forceRefresh,cacheType:e.cacheType}),e.replace?e.$router.replace(e.to,n,a):e.$router.push(e.to,n,a))}}},this.$slots.default)},mounted:function(){},methods:{}}}])});